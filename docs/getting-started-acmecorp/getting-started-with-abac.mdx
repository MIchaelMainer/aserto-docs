---
sidebar_label: Attribute Based Access Control
---

# Attribute Based Access Control

In the PeopleFinder Quickstart, we used RBAC (Role Based Access Control) to control access to the PeopleFinder application's endpoints. In this section, we'll explore the concept of Attribute Based Access Control and see how it can provide us with a more granular and dynamic authorization model.

Unlike RBAC, which categorizes users into a distinct set of roles, ABAC allows us to use any number of attributes a user may have to determine if they have access to a particular resource. While roles give us a sense of _what the user's job_ is in an organization, attributes give us a sense of _who the user is_ and what properties are particular to them.

For examples, some of these attributes could be a user's location, their IP address, the type of device they're using, their current department, the project they're working on, etc. Defining rules based on attributes that can change over time gives this authorization model a _dynamic_ quality: the authorization decision will depend on the user's attributes' value at runtime.

With ABAC, we can define fine-grained rules that may include multiple user attributes. For example, we may want to allow a user to access a resource if they are in a member of a specific department while working on a specific project and during a specific time period.

As we'll see in this example, the dynamic behavior we can achieve with ABAC could be used to support a wide variety of use cases that couldn't be satisfied using RBAC alone. That said, we have to use ABAC judiciously, since it can increase the complexity of our authorization model and make it more difficult to maintain.

## Creating an Attribute Based Access Control Policy

We're going to create an ABAC policy that will interact with our PeopleFinder application. First, open the Aserto Console and navigate to the **Policies** tab.

Create a new policy based on the `policy-peoplefinder` template. Open the policy once it is created, and open the `peoplefinder.POST.api.users.__id` module.

![console-policy-peoplefinder-post](/getting-started-acmecorp/console-policy-peoplefinder-post.png)

As you can see, this policy is slightly different from the RBAC policy we created before: instead of referencing the `data` object (which is based on the definitions in the `data.json` file) and the roles defined there, it uses the user's _attributes_ to determine whether they are equal to a specific value.

In this module, we check whether the user's `department` attribute is equal to `Operations`. If the check yields a `true` value, the user will be `allowed` to perform the `POST` operation on the `/api/users/:id` resource - which means they'll be able to update the `title` and `department` attributes of another user.
This policy will result in a dynamic behavior of the authorization model: any user assigned to the `Operations` department _at runtime_ will now have the permission to make updates to other users as well.

Let's update our PeopleFinder application to point to this new policy to see it in action.

## Redeploy to Netlify

To deploy this policy to Netlify, open your Netlify site's settings and open the Build & deploy tab:

![netlify-site-settings](/getting-started-acmecorp/netlify-site-settings.png)

Then, scroll down to the Environment variables section and click edit variables:

![netlify-environment](/getting-started-acmecorp/netlify-environment.png)

Update the `POLICY_ID` variable to the Policy ID of the policy you just created (to find it, open your policy settings tab in the Aserto console) and save your changes.

Finally, you'll have to trigger a redeploy of the Netlify application. Navigate to the Deploys tab:

![netlify-deploys](/getting-started-acmecorp/netlify-deploys.png)

The click the dropdown "Trigger deploy" and select "Deploy site".

![netlify-deploy-trigger](/getting-started-acmecorp/netlify-deploy-trigger.png)

## Examine the application behavior

Open the PeopleFinder application, and select Euan from the profile switcher. Then, select a user from the People directory.

![euan-as-sales](/getting-started-acmecorp/euan-as-sales.png)

As you can see, right now, Euan can't update the title or department of another user - the Update button is disabled for him.

Next, use the profile switcher and select Kris. As a member of the "Operations" department, Kris is allowed to update other user's title and department. From the People list, select Euan and bring up his user card.

![euan-and-kris-pre-update](/getting-started-acmecorp/euan-and-kris-pre-update.png)

Now, update Euan's _department_ to be "Operations".

![euan-and-kris-mid-update](/getting-started-acmecorp/euan-and-kris-mid-update.png)

and hit save.

We'll use the profile switcher again to select Euan and then select any user from the People directory. With his department updated, Euan can now update any user's title and department.

![euan-as-operations](/getting-started-acmecorp/euan-as-operations.png)

If we were using an RBAC model, we would have had to explicitly give Euan the role of `admin` or `editor` to give him permissions to perform this action. Using the ABAC model we were able to modify the _value_ of an existing attribute (`department`) to grant him this permission _dynamically_.

# Summary

In this section we learned how powerful of an authorization model ABAC is, and how it can be used to create a dynamic authorization behavior - based on user attributes. We saw how it lets us define more granular authorization models that can take into account an arbitrary number of attributes. In some cases, using RBAC will not be enough to address all the complex scenarios present in the application. In those cases, we can rely on ABAC to provide us with a more granular and dynamic authorization model.
