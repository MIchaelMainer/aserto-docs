---
sidebar_label: Decision Logs
---

# Decision Logs

Decision logs are records of the decisions performed by Aserto authorizers that are collected into a central location by the Aserto control plane. Both hosted and sidecar authorizers can generate decision logs for policies that have them enabled.

Decision logs can be accessed through the Aserto API and the Aserto CLI. Both of these methods support downloading data as storage objects as well as a near-real-time data stream.

Storage objects hold decision log data for an extended period of time, are not real-time, and are immutable. They can be used to efficiently feed analytics systems such as Elastic or Tableau.

Data streams hold data for a short period of time, are near real-time and can be used to feed into data streaming systems or to build applications that require up-to-the-minute data.

## Enable Decision Logs

Decision logging can be enabled on each policy; once on, decision logs are generated by every authorizer that loads that policy. To enable the decision logs, navigate to the Authorizer tab and open the instance for which you want to enable the logs.

Click on the "Decision logs" tab on the left-hand sidebar:

<img src="/decision-logs-sidebar.png" width="300px" />

Enable the decision logs by toggleing the "Record decision log" switch:

<img src="/decision-logs-switch.png" width="230px" />

After making some calls to the authorizer, you'll be able to see the aggregated decision logs:

<img src="/decision-logs.png" />

## Accessing Decision Logs through the CLI

Immutable storage objects are created roughly once an hour for each policy for which decision logging is enabled and for which decision activity exists during that time period. The storage are CSV files containing decision log events; each one corresponding to a decision performed by some authorizer. Objects for one, more (or all) policies can be discovered and then downloaded individually using the API or CLI. The CLI also supports bulk downloads.

### Listing Objects

```
aserto login
aserto decision-logs list [--policies=<policy-id1>,<policy-id2>...<policy-idN>]
```

### Fetch a Download URL

For each decision log object name, a download URL can be obtained. The download URL can be used to perform a standard HTTP download.

```
aserto login
aserto decision-logs get --info <object name>
```

### Bulk Downloads

The Aserto CLI can also perform bulk downloads, which can be useful when automating ingestion of decision log objects into analytics tools.

```
aserto decision-logs get [--path <destination path>] [--policies <policy-id1>,<policy-id2>...<policyi-idN>]
```

When this way, the CLI will only download decision log objects which don't already exist in the destination path.

### Decision Log Object Contents

Decision log objects are CSV files containing the data and references to the data used in every decision Aserto authorizers perform. The fields included are:

| Field name       | Description                                                                                                     |
| :--------------- | :-------------------------------------------------------------------------------------------------------------- |
| decision_id      | A unique identifier for a decision, useful for de-duplication.                                                  |
| decision_time    | UTC time when the decision was executed.                                                                        |
| user_id          | The user on behalf of whom the decision was made. This is the user in the user context authorizer call.         |
| policy_id        |                                                                                                                 |
| resource_context | The resource context in which the decision was made. This the resource context provided to the authorizer call. |
| path             | The authorization path used in the decision, as provided to the authorizer.                                     |
| decision         | The name of the decision. This corresponds to one of the decisions requested in an authorizer call.             |
| outcome          | Outcome of the decision (true/false).                                                                           |

In order to fully reconstruct a decision it may be required to resolve the user_id and the policy_id (which is implied in the decision log object name). See the “Other Storage Objects” section.

## Other Storage Objects

Aserto’s decision logging system maintains versioned copies of users and policies involved in decisions. These can be accessed using the Aserto API and CLI.

### Listing User Objects

```
aserto decision-logs list-users
```

### Fetch a Download URL

For each user object name, a download URL can be obtained. The download URL can be used to perform a standard HTTP download.

```
aserto decision-logs get-user --info <object name>
```

### Bulk Downloads

The Aserto CLI can also perform bulk downloads, which can be useful when automating ingestion of data referenced by decision log objects.

```
aserto decision-logs get-users [--path <destination path>]
```

When used this way, the CLI will only download objects that have changed since last downloaded, according to the metadata on the local versions and remote versions of the objects.
